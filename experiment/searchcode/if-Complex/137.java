/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * RepositoryUIMainPanelTop2.java
 *
 * Created on 14-jul-2011, 8:50:24
 */
package chamiloda.gui.implementations.repository;

import chamiloda.gui.implementations.RepositoryUI;
import chamiloda.domain.contentobjects.ComplexContentObjectImplementation;
import chamiloda.domain.contentobjects.ContentObjectImplementation;
import chamiloda.domain.contentobjects.RepositoryCategory;
import chamiloda.domain.utilities.Utilities;
import chamiloda.gui.toolset.StringsResetter;

/**
 *
 * @author mmeu164
 */
public class GeneralViewTop extends javax.swing.JPanel {


    private RepositoryUI parentUI;
    private ContentObjectImplementation viewedObject = null;
    private ComplexContentObjectImplementation viewedComplexObject = null;

    
    public RepositoryUI getParentUI()
    {
        return parentUI;
    }

    public void setParentUI(RepositoryUI parentUI)
    {
        this.parentUI = parentUI;
    }
    
    public GeneralViewTop()
    {
        initComponents();
    }
    

    public void update()
    {
        StringsResetter.resetStrings(this);
        Object obj = parentUI.getSelectedObject();
        if (obj instanceof ContentObjectImplementation)
        {
            this.viewedObject = (ContentObjectImplementation)obj;
            this.viewedComplexObject = null;
        }
        else if (obj instanceof ComplexContentObjectImplementation)
        {
            this.viewedComplexObject = (ComplexContentObjectImplementation)obj;
            this.viewedObject = viewedComplexObject.getEncapsulatedObject();
        }
        else
            this.viewedObject = null;

        // only show button if complex child object
        this.btnGotoCategory.setVisible(obj instanceof ComplexContentObjectImplementation);

        this.fillInfo();
    }

    private void fillInfo()
    {
        String title;
        String description;
        String lastModified;
        String creationDate;
        String location;
        
        if (viewedObject!=null)
        {
            title = viewedObject.getTitle();
            description=viewedObject.getDescription();
            lastModified=Utilities.formatDate(viewedObject.getModifiedDate());
            creationDate=Utilities.formatDate(viewedObject.getCreationDate());
            if (viewedObject.getParent() == null)
                location = RepositoryCategory.CATSEPARATOR;
            else
                location = RepositoryCategory.getPathString(viewedObject.getParent());
        }
        else
        {
            title="";
            description="";
            lastModified="";
            creationDate="";
            location = "";
        }
        txtTitle.setText(title);
        edtDescription.setText(description);
        txtLastModified.setText(lastModified);
        txtCreated.setText(creationDate);
        txtLocation.setText(location);
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblTitle = new javax.swing.JLabel();
        txtTitle = new javax.swing.JTextField();
        lblDescription = new javax.swing.JLabel();
        txtCreated = new javax.swing.JTextField();
        lblCreated = new javax.swing.JLabel();
        txtLastModified = new javax.swing.JTextField();
        lblLastModified = new javax.swing.JLabel();
        txtLocation = new javax.swing.JTextField();
        lblLocation = new javax.swing.JLabel();
        btnGotoCategory = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        edtDescription = new javax.swing.JEditorPane();

        lblTitle.setText("title");
        lblTitle.setName("[title]"); // NOI18N

        txtTitle.setEditable(false);

        lblDescription.setText("description");
        lblDescription.setName("[description]"); // NOI18N

        txtCreated.setEditable(false);

        lblCreated.setText("created");
        lblCreated.setName("[created_date]"); // NOI18N

        txtLastModified.setEditable(false);

        lblLastModified.setText("last modified");
        lblLastModified.setName("[last_modified_date]"); // NOI18N

        txtLocation.setEditable(false);

        lblLocation.setText("location");
        lblLocation.setName("[location]"); // NOI18N

        btnGotoCategory.setText("go to category");
        btnGotoCategory.setName("[go_to_category]"); // NOI18N
        btnGotoCategory.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGotoCategoryActionPerformed(evt);
            }
        });

        edtDescription.setContentType("text/html");
        edtDescription.setEditable(false);
        jScrollPane2.setViewportView(edtDescription);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblTitle)
                    .addComponent(lblDescription)
                    .addComponent(lblCreated)
                    .addComponent(lblLastModified)
                    .addComponent(lblLocation)
                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 166, Short.MAX_VALUE)
                    .addComponent(txtCreated, javax.swing.GroupLayout.DEFAULT_SIZE, 166, Short.MAX_VALUE)
                    .addComponent(txtTitle, javax.swing.GroupLayout.DEFAULT_SIZE, 166, Short.MAX_VALUE)
                    .addComponent(txtLastModified, javax.swing.GroupLayout.DEFAULT_SIZE, 166, Short.MAX_VALUE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(txtLocation, javax.swing.GroupLayout.DEFAULT_SIZE, 57, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnGotoCategory))))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblTitle)
                    .addComponent(txtTitle, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(lblDescription)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 42, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtCreated, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblCreated))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtLastModified, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblLastModified))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(txtLocation, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblLocation)
                    .addComponent(btnGotoCategory)))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btnGotoCategoryActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGotoCategoryActionPerformed
        if (viewedObject != null)
            parentUI.setSelectedObject(viewedObject.getParent(), null);
    }//GEN-LAST:event_btnGotoCategoryActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnGotoCategory;
    private javax.swing.JEditorPane edtDescription;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JLabel lblCreated;
    private javax.swing.JLabel lblDescription;
    private javax.swing.JLabel lblLastModified;
    private javax.swing.JLabel lblLocation;
    private javax.swing.JLabel lblTitle;
    private javax.swing.JTextField txtCreated;
    private javax.swing.JTextField txtLastModified;
    private javax.swing.JTextField txtLocation;
    private javax.swing.JTextField txtTitle;
    // End of variables declaration//GEN-END:variables
}

